<html>
<head>
    <title>Forms</title>
    {{!-- <link rel="stylesheet" href="/css/index.css"> --}}
    <style>
        /* Add your custom styles here */
        body {
            margin: 0;
            font-size: 14px;
            font-family: Arial, sans-serif;
            
        }
        td {
            padding: 10px;
        }
        tr {
            border-bottom: 1px solid #e1e1e1;
        }
        .hide {
            display: none;
        }
        .rename-form-btn,
        .edit-form-btn {
            background: white;
            /* color: #fff; */
            border: 1px solid #E1E1E1;
            /* border-radius: 3px; */
            padding: 4px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .rename-form-btn {
            color: blue;
        }
        .rename-form-btn i {
            margin-right: 6px;
            font-size: 10px;
        }
        .save-form-btn {
            background: #28a745;
            color: #fff;
            border: none;
            border-radius: 3px;
            padding: 4px 10px;
            cursor: pointer;
        }
        .delete-form-btn {
            color: #e74c3c;
            border: none;
            cursor: pointer;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
<body>
    <div class="header" style="display: flex;justify-content: space-between;align-items: center;border-bottom: 1px solid #e1e1e1;">
        <div class="left" style="display: flex;">
                <div class="logo-block" style="width: 60px; display: flex; flex-direction: column; gap: 8px;">
                <img src="{{{logo_url}}}" alt="logo" style="width: 60%;padding: 10px;">
            </div>
            <h2 style="display:flex;align-items:center;margin:0;">Forms</h2>
        </div>
        
        <button id="add-form-btn" style="    padding: 5px 10px;
    background: #6c63ff;
    color: #fff;
    border: none;
    border-radius: 4px;
    margin-right: 10px;">+ Add Form</button>
    </div>
    <div class="container" style="background:#fff;border-radius:8px;box-shadow:0 2px 12px #0001;">
        <div class="data-block" style="display: flex;justify-content: center;align-items: center;overflow-x:auto;">
            <table style="width:100%;border-collapse:collapse;">
                <thead>
                    <tr style="background:#f8f9fa;">
                        <th style="padding:10px 8px;text-align:left;">ID</th>
                        <th style="padding:10px 8px;text-align:left;">Name</th>
                        <th style="padding:10px 8px;text-align:left;">Actions</th>
                    </tr>
                </thead>
                <tbody id="forms-list">
                    {{#each forms}}
                      <tr class="form-row" data-id="{{id}}">
                        {{!-- <td>{{id}}</td> --}}
                        <td>{{name}}</td>
                        <td>
                          <button class="delete-form-btn" data-id="{{id}}" style="background:#e74c3c;color:#fff;border:none;border-radius:3px;padding:4px 10px;cursor:pointer;">Delete</button>
                        </td>
                      </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="/js/forms.js"></script>
    <script>
    $(document).on('click', '.delete-form-btn', function(e) {
        e.preventDefault();
        var formId = $(this).data('id');
        if(confirm('Are you sure you want to delete this form?')) {
            $.ajax({
                url: '/api/forms/' + formId,
                type: 'DELETE',
                success: function(resp) {
                    if(resp.success) {
                        $('[data-id="' + formId + '"]').remove();
                        Toastify({
                            text: "Form deleted successfully",
                            duration: 3000,
                            close: true,
                            gravity: "top", // `top` or `bottom`
                            position: "right", // `left`, `center` or `right`
                            backgroundColor: "#28a745",
                        }).showToast()
                    } else {
                        alert('Delete failed: ' + (resp.error || 'Unknown error'));
                    }
                },
                error: function() {
                    alert('Delete failed.');
                }
            });
        }
    });
    </script>
</body>
</html>
